<!DOCTYPE html>
<html class="no-js" lang="">

<head>
  <meta charset="utf-8" />
  <meta name="description" content="" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Exff | Register</title>

  <link rel="logoicon" href="logoicon.png" />
  <!-- Place favicon.ico in the root directory -->

  <!-- build:css styles/vendor.css -->
  <!-- bower:css -->
  <link rel="stylesheet" href="/bower_components/datetimepicker/jquery.datetimepicker.css" />
  <!-- endbower -->
  <!-- endbuild -->

  <!-- build:css styles/main.css -->
  <link rel="stylesheet" href="styles/main.css" />
  <!-- endbuild -->

  <!-- build:js scripts/vendor/modernizr.js -->
  <script src="/bower_components/modernizr/modernizr.js"></script>
  <!-- endbuild -->
</head>

<body>
  <!--[if lt IE 10]>
      <p class="browserupgrade">
        You are using an <strong>outdated</strong> browser. Please
        <a href="http://browsehappy.com/">upgrade your browser</a> to improve
        your experience.
      </p>
    <![endif]-->
  <div class="background login__background"></div>
  <div class="login__container">
    <div class="login__form position--absolute center">
      <div class="background login__form__background"></div>
      <div class="position--relative">
        <form action="#" id="form">
          <h1>Tạo tài khoản</h1>
          <hr />
          <div class="field__container hidden" id="errorNotif">
            <span class="error">Đăng ký thất bại.</span>
          </div>
          <div class="field__container">
            <label for="phoneNumber">Số điện thoại</label>
            <input type="text" name="phoneNumber" id="phoneNumber" />
            <p class="error hidden">Số điện thoại phải có từ 9 đến 10 chữ số.</p>
          </div>
          <div class="field__container">
            <label for="password">Mật khẩu</label>
            <input type="password" name="password" id="password" />
            <p class="error hidden">Mật khẩu phải có từ 8 đến 50 kí tự.</p>
          </div>
          <div class="field__container">
            <label for="password">Xác nhận mật khẩu</label>
            <input type="password" name="confirmPassword" id="confirmPassword" />
            <p class="error hidden">Không trùng với mật khẩu.</p>
          </div>
          <div class="field__container">
            <label for="fullname">Họ và tên</label>
            <input type="text" name="fullname" id="fullname" />
            <p class="error hidden">Họ và tên không được để trống.</p>
          </div>
          <div class="field__container clearfix">
            <button class="primary float-right" id="btnRegister">Đăng ký</button>
          </div>
          <hr />
          <div class="field__container clearfix">
            <a class="primary float-right" href="./login.html">Đăng nhập</a>
            <span class="float-right">&nbsp;|&nbsp;</span>
            <a class="primary float-right" href="/">Về trang chủ</a>
          </div>
        </form>
      </div>
    </div>
  </div>


  <!-- build:js scripts/vendor/jquery.js -->
  <!-- bower:js -->
<script src="/bower_components/jquery/dist/jquery.js"></script>
  <script src="/bower_components/datetimepicker/build/jquery.datetimepicker.full.min.js"></script>
  <!-- endbower -->
  <!-- endbuild -->


  <!-- build:js scripts/main.js -->
  <script src="scripts/main.js"></script>
  <script src="scripts/validation.js"></script>
  <script src="scripts/login.js"></script>
  <script src="scripts/register.js"></script>
  <!-- endbuild -->
  <script>
    $(document).ready(() => {
      $("#form").submit((event) => {
        event.preventDefault();
        if (validate()) {
          let phoneNumber = $("#phoneNumber").val();
          let password = $("#password").val();
          let fullName = $("#fullname").val();
          let data = {
            "phoneNumber": phoneNumber,
            "password": password,
            "fullName": fullName
          }
          register(data, registerSuccess, registerFails);
        }
      });
      $("#phoneNumber").focusout(() => {
        checkRegex('#phoneNumber', /^[0-9]{9,10}$/);
      });
      $("#password").focusout(() => {
        checkRegex('#password', /^.{8,50}$/);
      });
      $("#confirmPassword").focusout(() => {
        checkMatch('#confirmPassword', $("#password").val());
      });
      $("#fullname").focusout(() => {
        checkRequire('#fullname');
      });
    });

    function validate() {
      return checkRegex('#phoneNumber', /^[a-z0-9]{6,12}$/) &&
        checkRegex('#password', /^.{8,50}$/) &&
        checkMatch('#confirmPassword', $("#password").val()) &&
        checkRequire('#fullname');
    }

    function registerSuccess(data) {
      window.location.replace('./login.html');
    }

    function registerFails(err) {
      $("#errorNotif").show();
    }

  </script>
</body>

</html>